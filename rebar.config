%% -*- erlang -*-

{minimum_otp_vsn, "25"}.

{deps,
 [{base64url, {git, "https://github.com/potatosalad/erlang-base64url.git", {branch, "master"}}},
  {gproc, {git, "https://github.com/uwiger/gproc.git", {tag, "0.9.0"}}},
  {gun, {git, "https://github.com/ninenines/gun.git", {tag, "2.0.1"}}},
  {ranch, {git, "https://github.com/ninenines/ranch.git", {tag, "2.1.0"}}},
  {poolboy, {git, "https://github.com/devinus/poolboy.git", {tag, "1.5.2"}}},
  {cowboy, {git, "https://github.com/ninenines/cowboy.git", {branch, "master"}}},
  {bbmustache, {git, "https://github.com/soranoba/bbmustache.git", {tag, "v1.12.2"}}},
  {jose, {git, "https://github.com/potatosalad/erlang-jose.git", {tag, "1.11.1"}}},
  {jesse, {git, "https://github.com/for-GET/jesse.git", {tag, "1.8.1"}}}
 ]}.

{shell, [{apps, [erlmcp_core, erlmcp_transports, erlmcp_validation]}, {config, "config/sys.config"}, {vm_args, "vm.args"}]}.

{eunit_opts, [verbose, {report, {eunit_surefire, [{dir, "_build/test"}]}}]}.
{cover_enabled, true}.
{cover_opts, [verbose]}.

{dialyzer, [{warnings, [all]}, {get_warnings, true}]}.

{erl_opts, [
  {d, 'OTP_MAJOR_VERSION', '25'},
  {i, "include"},
  {i, "apps/erlmcp_core/include"},
  {i, "apps/erlmcp_transports/include"},
  {i, "apps/erlmcp_validation/include"}
]}.

{profiles,
 [{test, [{deps, [{proper, {git, "https://github.com/proper-testing/proper.git", {branch, "master"}}}, {meck, {git, "https://github.com/eproxus/meck.git", {tag, "0.9.2"}}}]}]},
  {prod, [{relx, [{dev_mode, false}, {include_erts, true}, {include_src, false}]}]}
 ]}.
