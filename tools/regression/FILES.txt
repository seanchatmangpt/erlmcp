REGRESSION PREVENTION SYSTEM - FILE INVENTORY
==============================================

Created: 2026-01-28
Total Files: 11 (plus 1 workflow)
Total Size: ~65 KB

ABSOLUTE PATHS:
===============

Tools (7 files):
  /Users/sac/erlmcp/tools/regression/detect-regression.sh
  /Users/sac/erlmcp/tools/regression/block-on-regression.sh
  /Users/sac/erlmcp/tools/regression/generate-html-report.sh
  /Users/sac/erlmcp/tools/regression/allowlist.json
  /Users/sac/erlmcp/tools/regression/test-system.sh
  /Users/sac/erlmcp/tools/regression/README.md
  /Users/sac/erlmcp/tools/regression/INSTALLATION.md

Documentation (3 files):
  /Users/sac/erlmcp/docs/regression/PREVENTION_SYSTEM.md
  /Users/sac/erlmcp/docs/regression/QUICK_START.md
  /Users/sac/erlmcp/docs/regression/INDEX.md

CI/CD (1 file):
  /Users/sac/erlmcp/.github/workflows/regression-guard.yml

RELATIVE PATHS (from project root):
====================================

tools/regression/
├── detect-regression.sh       - Metric collection & comparison
├── block-on-regression.sh     - Quality gate enforcement
├── generate-html-report.sh    - HTML report generator
├── allowlist.json             - Permitted exceptions
├── test-system.sh             - System validation
├── README.md                  - Tool reference
├── INSTALLATION.md            - Setup guide
└── FILES.txt                  - This file

docs/regression/
├── PREVENTION_SYSTEM.md       - Complete documentation
├── QUICK_START.md             - Getting started guide
└── INDEX.md                   - Documentation index

.github/workflows/
└── regression-guard.yml       - GitHub Actions workflow

.metrics/ (generated at runtime, gitignored)
├── baseline.json              - Baseline metrics
├── current.json               - Current metrics
├── regression-report.json     - Detected regressions
├── regression-report.html     - Visual report
└── regression-summary.txt     - Text summary

FILE DESCRIPTIONS:
==================

detect-regression.sh (12 KB)
  - Collects current metrics (tests, coverage, warnings, performance, complexity)
  - Compares against baseline from main branch
  - Calculates regression severity (low/medium/high/critical)
  - Generates regression-report.json
  - Exit codes: 0=none, 1=medium, 2=high, 3=critical

block-on-regression.sh (7.5 KB)
  - Enforces quality gates based on severity
  - Checks allowlist for permitted exceptions
  - BLOCKS on critical/high (unless allowlisted)
  - WARNS on medium (requires justification)
  - ALLOWS on low or none
  - Generates regression-summary.txt
  - Exit codes: 0=pass, 1=fail (blocked)

generate-html-report.sh (14 KB)
  - Reads regression-report.json
  - Generates beautiful HTML visualization
  - Color-coded severity levels
  - Before/after comparisons
  - Fix recommendations by metric type
  - Creates regression-report.html

allowlist.json (810 B)
  - Controlled exceptions for permitted regressions
  - Schema: metric, severity, justification, approver, date, expiry, ticket
  - Review policy by severity level
  - Periodic review configuration

test-system.sh (4.2 KB)
  - Validates system installation
  - 10 comprehensive tests
  - Checks scripts, dependencies, structure, docs
  - Exit code 0 if all tests pass

README.md (5.9 KB)
  - Tool usage reference
  - Command examples
  - Troubleshooting guide
  - Integration examples

INSTALLATION.md (5.8 KB)
  - Setup instructions
  - Dependency installation
  - Configuration options
  - CI/CD integration

PREVENTION_SYSTEM.md (13 KB)
  - Complete technical documentation
  - Architecture diagrams
  - Metric definitions
  - Severity thresholds
  - Best practices
  - TCPS integration

QUICK_START.md (6.2 KB)
  - 5-minute getting started guide
  - Common scenarios
  - Usage examples
  - Troubleshooting

INDEX.md (5.1 KB)
  - Documentation navigation
  - Quick links
  - File structure
  - Common workflows

regression-guard.yml (7.6 KB)
  - GitHub Actions workflow
  - Runs on every PR
  - Collects baseline from main
  - Collects current from PR
  - Detects regressions
  - Posts PR comment
  - Sets status check
  - Uploads artifacts

USAGE:
======

Local Development:
  ./tools/regression/detect-regression.sh
  ./tools/regression/block-on-regression.sh
  ./tools/regression/generate-html-report.sh
  open .metrics/regression-report.html

System Test:
  ./tools/regression/test-system.sh

Documentation:
  cat docs/regression/QUICK_START.md
  cat docs/regression/PREVENTION_SYSTEM.md
  cat tools/regression/README.md

METRICS TRACKED:
================

1. Test Pass Rate (%)
   Critical: ≥5% drop
   Medium: 2-5% drop

2. Code Coverage (%)
   Critical: ≥10% drop
   Medium: 5-10% drop

3. Compilation Warnings (count)
   High: ≥20% increase
   Medium: 10-20% increase

4. Performance Throughput (msg/s)
   Critical: ≥20% degradation
   High: ≥10% degradation
   Medium: 5-10% degradation

5. Code Complexity (lines/module)
   Medium: ≥15% increase

QUALITY GATES:
==============

CRITICAL → BLOCKS MERGE
  - Requires VP Engineering approval override
  
HIGH → BLOCKS MERGE
  - Requires Tech Lead + 2 Senior Engineers approval

MEDIUM → WARNING
  - Requires justification in PR description
  - Requires Tech Lead approval

LOW → INFORMATIONAL
  - Noted but doesn't block

TCPS INTEGRATION:
=================

Principle: 自働化 (Jidoka)
  - Automation with human intelligence
  - Built-in quality
  - Stop-the-line authority

Command: /tcps-jidoka
  - Runs quality checks including this system

Philosophy:
  - Build quality in, don't inspect it in later
  - Fix root cause, don't workaround

STATUS:
=======

✅ All scripts validated (bash -n)
✅ All scripts executable (chmod +x)
✅ JSON schema valid
✅ Dependencies checked
✅ Documentation complete
✅ GitHub Actions configured
✅ System tests passing (10/10)
✅ Production ready

VERSION: 1.0.0
DATE: 2026-01-28
AUTHOR: Claude Code (Erlang Performance Agent)
