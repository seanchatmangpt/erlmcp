[0;32m===> Verifying dependencies...
[0m[0;32m===> Upgrading fs v0.9.2
[0m[0;32m===> Analyzing applications...
[0m[0;32m===> Compiling fs
[0m[0;32m===> Compiling cowboy
[0m[0;32m===> Compiling coveralls
[0m[0;32m===> Compiling proper
[0m[0;32m===> Compiling meck
[0m[0;32m===> Analyzing applications...
[0m[0;32m===> Compiling erlmcp_core
[0m     â”Œâ”€ apps/erlmcp_core/src/erlmcp_server.erl:
     â”‚
 883 â”‚                  [1;31m{[0mnoreply, State};[0m
     â”‚                  [1;31mâ•°â”€â”€[0m[0m Warning: a term is constructed, but never used

     â”Œâ”€ apps/erlmcp_core/src/erlmcp_server.erl:
     â”‚
 893 â”‚                                  [1;31m{[0mnoreply, State};[0m
     â”‚                                  [1;31mâ•°â”€â”€[0m[0m Warning: a term is constructed, but never used

     â”Œâ”€ apps/erlmcp_core/src/erlmcp_server.erl:
     â”‚
 898 â”‚                                  [1;31m{[0mnoreply, State}[0m
     â”‚                                  [1;31mâ•°â”€â”€[0m[0m Warning: a term is constructed, but never used

     â”Œâ”€ apps/erlmcp_core/src/erlmcp_server.erl:
     â”‚
 904 â”‚                          [1;31m{[0mnoreply, State}[0m
     â”‚                          [1;31mâ•°â”€â”€[0m[0m Warning: a term is constructed, but never used


[0;32m===> Compiling erlmcp_validation
[0m[0;32m===> Compiling erlmcp_observability
[0m[0;32m===> Compiling erlmcp_transports
[0m   â”Œâ”€ apps/erlmcp_transports/src/erlmcp_transport_http.erl:
   â”‚
 2 â”‚  -[1;31mbehaviour[0m(erlmcp_transport).[0m
   â”‚   [1;31mâ•°â”€â”€[0m[0m Warning: behaviour erlmcp_transport undefined


     â”Œâ”€ apps/erlmcp_core/test/erlmcp_sse_event_store_tests.erl:
     â”‚
 380 â”‚      ?assertMatch([1;31m_[0m, ets:whereis(TableName)),[0m
     â”‚                   [1;31mâ•°â”€â”€[0m[0m Warning: this clause cannot match because a previous clause at line 380 always matches


   â”Œâ”€ apps/erlmcp_core/test/erlmcp_server_tests.erl:
   â”‚
 6 â”‚  -[1;31mrecord[0m(state, {[0m
   â”‚   [1;31mâ•°â”€â”€[0m[0m Warning: record state is unused

      â”Œâ”€ apps/erlmcp_core/test/erlmcp_server_tests.erl:
      â”‚
 1008 â”‚      [1;31m{[0mtimeout, 5, fun() ->[0m
      â”‚      [1;31mâ•°â”€â”€[0m[0m Warning: a term is constructed, but never used

      â”Œâ”€ apps/erlmcp_core/test/erlmcp_server_tests.erl:
      â”‚
 1008 â”‚      {timeout, 5, [1;31mfun[0m() ->[0m
      â”‚                   [1;31mâ•°â”€â”€[0m[0m Warning: a term is constructed, but never used

      â”Œâ”€ apps/erlmcp_core/test/erlmcp_server_tests.erl:
      â”‚
 1026 â”‚      [1;31m{[0mtimeout, 5, fun() ->[0m
      â”‚      [1;31mâ•°â”€â”€[0m[0m Warning: a term is constructed, but never used

      â”Œâ”€ apps/erlmcp_core/test/erlmcp_server_tests.erl:
      â”‚
 1026 â”‚      {timeout, 5, [1;31mfun[0m() ->[0m
      â”‚                   [1;31mâ•°â”€â”€[0m[0m Warning: a term is constructed, but never used

      â”Œâ”€ apps/erlmcp_core/test/erlmcp_server_tests.erl:
      â”‚
 1050 â”‚      [1;31m{[0mtimeout, 5, fun() ->[0m
      â”‚      [1;31mâ•°â”€â”€[0m[0m Warning: a term is constructed, but never used

      â”Œâ”€ apps/erlmcp_core/test/erlmcp_server_tests.erl:
      â”‚
 1050 â”‚      {timeout, 5, [1;31mfun[0m() ->[0m
      â”‚                   [1;31mâ•°â”€â”€[0m[0m Warning: a term is constructed, but never used

      â”Œâ”€ apps/erlmcp_core/test/erlmcp_server_tests.erl:
      â”‚
 1068 â”‚      [1;31m{[0mtimeout, 5, fun() ->[0m
      â”‚      [1;31mâ•°â”€â”€[0m[0m Warning: a term is constructed, but never used

      â”Œâ”€ apps/erlmcp_core/test/erlmcp_server_tests.erl:
      â”‚
 1068 â”‚      {timeout, 5, [1;31mfun[0m() ->[0m
      â”‚                   [1;31mâ•°â”€â”€[0m[0m Warning: a term is constructed, but never used

      â”Œâ”€ apps/erlmcp_core/test/erlmcp_server_tests.erl:
      â”‚
 1087 â”‚      [1;31m{[0mtimeout, 5, fun() ->[0m
      â”‚      [1;31mâ•°â”€â”€[0m[0m Warning: a term is constructed, but never used

      â”Œâ”€ apps/erlmcp_core/test/erlmcp_server_tests.erl:
      â”‚
 1087 â”‚      {timeout, 5, [1;31mfun[0m() ->[0m
      â”‚                   [1;31mâ•°â”€â”€[0m[0m Warning: a term is constructed, but never used

      â”Œâ”€ apps/erlmcp_core/test/erlmcp_server_tests.erl:
      â”‚
 1105 â”‚      [1;31m{[0mtimeout, 5, fun() ->[0m
      â”‚      [1;31mâ•°â”€â”€[0m[0m Warning: a term is constructed, but never used

      â”Œâ”€ apps/erlmcp_core/test/erlmcp_server_tests.erl:
      â”‚
 1105 â”‚      {timeout, 5, [1;31mfun[0m() ->[0m
      â”‚                   [1;31mâ•°â”€â”€[0m[0m Warning: a term is constructed, but never used

      â”Œâ”€ apps/erlmcp_core/test/erlmcp_server_tests.erl:
      â”‚
 1124 â”‚      [1;31m{[0mtimeout, 5, fun() ->[0m
      â”‚      [1;31mâ•°â”€â”€[0m[0m Warning: a term is constructed, but never used

      â”Œâ”€ apps/erlmcp_core/test/erlmcp_server_tests.erl:
      â”‚
 1124 â”‚      {timeout, 5, [1;31mfun[0m() ->[0m
      â”‚                   [1;31mâ•°â”€â”€[0m[0m Warning: a term is constructed, but never used


     â”Œâ”€ apps/erlmcp_core/test/erlmcp_completion_tests.erl:
     â”‚
 106 â”‚          Value = maps:get(value, Arg, [1;31m<<>>),[0m[0m
     â”‚                                       [1;31mâ•°â”€â”€[0m[0m Warning: a term is constructed, but never used

     â”Œâ”€ apps/erlmcp_core/test/erlmcp_completion_tests.erl:
     â”‚
 379 â”‚          Value = maps:get(value, Arg, [1;31m<<>>),[0m[0m
     â”‚                                       [1;31mâ•°â”€â”€[0m[0m Warning: a term is constructed, but never used


     â”Œâ”€ apps/erlmcp_transports/test/erlmcp_transport_ws_tests.erl:
     â”‚
 370 â”‚      DelimitedMsg = [1;31m<<[0mMessage/binary, "\n">>,[0m
     â”‚                     [1;31mâ•°â”€â”€[0m[0m Warning: a term is constructed, but never used


     â”Œâ”€ apps/erlmcp_transports/test/erlmcp_transport_http_SUITE.erl:
     â”‚
 640 â”‚  -[1;31mrecord[0m(mock_state, {[0m
     â”‚   [1;31mâ•°â”€â”€[0m[0m Warning: record mock_state is unused


[0;32m===> Analyzing applications...
[0m[0;32m===> Compiling extra_test
[0m[0;35m===> Cover compilation failed: {no_abstract_code,
                                       "/Users/sac/erlmcp/_build/test/lib/erlmcp_core/ebin/erlmcp_connection_limiter_tests.beam"}
[0m[0;35m===> Cover compilation failed: {no_abstract_code,
                                       "/Users/sac/erlmcp/_build/test/lib/erlmcp_core/ebin/erlmcp_prompt_template_tests.beam"}
[0m[0;32m===> Performing EUnit tests...
[0m======================== EUnit ========================
file "erlmcp_validation.app"
  application 'erlmcp_validation'
    module 'erlmcp_protocol_validator'
      module 'erlmcp_protocol_validator_tests'
        erlmcp_protocol_validator_tests:45: -validate_valid_error_response_test_/0-fun-1-...ok
        erlmcp_protocol_validator_tests:63: -validate_error_response_missing_code_test_/0-fun-1-...ok
        erlmcp_protocol_validator_tests:84: -validate_valid_response_with_result_test_/0-fun-1-...ok
        erlmcp_protocol_validator_tests:103: -validate_valid_batch_request_test_/0-fun-1-...ok
        erlmcp_protocol_validator_tests:114: -validate_empty_batch_request_test_/0-fun-1-...ok
        erlmcp_protocol_validator_tests:136: -validate_initialize_method_test_/0-fun-1-...ok
        erlmcp_protocol_validator_tests:152: -validate_tools_list_method_test_/0-fun-1-...ok
        erlmcp_protocol_validator_tests:170: -validate_error_response_integration_test_/0-fun-1-...ok
        erlmcp_protocol_validator_tests:190: -validate_notification_integration_test_/0-fun-1-...ok
        [done in 0.029 s]
      [done in 0.029 s]
    module 'erlmcp_spec_parser'
      module 'erlmcp_spec_parser_tests'
        erlmcp_spec_parser_tests: extract_version_test...ok
        erlmcp_spec_parser_tests: extract_version_default_test...ok
        erlmcp_spec_parser_tests: validate_spec_version_valid_test...ok
        erlmcp_spec_parser_tests: validate_spec_version_invalid_test...ok
        erlmcp_spec_parser_tests: extract_methods_test...ok
        erlmcp_spec_parser_tests: method_req_structure_test...ok
        erlmcp_spec_parser_tests: tools_list_method_test...ok
        erlmcp_spec_parser_tests: extract_error_codes_test...ok
        erlmcp_spec_parser_tests: error_code_structure_test...ok
        erlmcp_spec_parser_tests: extract_notifications_test...ok
        erlmcp_spec_parser_tests: notification_structure_test...ok
        erlmcp_spec_parser_tests: extract_transports_test...ok
        erlmcp_spec_parser_tests: transport_structure_test...ok
        erlmcp_spec_parser_tests: extract_content_types_test...ok
        erlmcp_spec_parser_tests: extract_capabilities_test...ok
        erlmcp_spec_parser_tests: parse_specification_integration_test...ok
        erlmcp_spec_parser_tests: spec_parser_start_stop_test...ok
        erlmcp_spec_parser_tests: spec_parser_parse_test...ok
        erlmcp_spec_parser_tests: spec_parser_get_methods_test...ok
        erlmcp_spec_parser_tests: spec_parser_get_error_codes_test...ok
        erlmcp_spec_parser_tests: spec_parser_get_transports_test...ok
        [done in 0.063 s]
      [done in 0.063 s]
    module 'erlmcp_transport_validator'
      module 'erlmcp_transport_validator_tests'
        erlmcp_transport_validator_tests: validate_stdio_tests...ok
        erlmcp_transport_validator_tests: validate_http_tests...ok
        erlmcp_transport_validator_tests: validate_sse_tests...ok
        erlmcp_transport_validator_tests: validate_websocket_tests...ok
        erlmcp_transport_validator_tests: validate_tcp_tests...ok
        erlmcp_transport_validator_tests: -validate_all_test_/0-fun-6-...[0.015 s] ok
        erlmcp_transport_validator_tests: stdio_newline_delimited_format_test...ok
        erlmcp_transport_validator_tests: http_session_header_test...ok
        erlmcp_transport_validator_tests: sse_event_format_test...ok
        erlmcp_transport_validator_tests: websocket_utf8_test...ok
        erlmcp_transport_validator_tests: tcp_message_framing_test...ok
        [done in 0.048 s]
      [done in 0.048 s]
    module 'erlmcp_validation_app'
    module 'erlmcp_validation_sup'
    [done in 0.145 s]
  [done in 0.145 s]
file "erlmcp_transports.app"
  application 'erlmcp_transports'
    module 'erlmcp_http_header_validator'
    module 'erlmcp_origin_validator'
    module 'erlmcp_pool_manager'
      module 'erlmcp_pool_manager_tests'
        erlmcp_pool_manager_tests: pool_creation_test...ok
        erlmcp_pool_manager_tests: checkout_checkin_test...ok
        erlmcp_pool_manager_tests: multiple_checkouts_test...ok
        erlmcp_pool_manager_tests: round_robin_strategy_test...ok
        erlmcp_pool_manager_tests: least_loaded_strategy_test...ok
        erlmcp_pool_manager_tests: random_strategy_test...ok
        erlmcp_pool_manager_tests: pool_resize_grow_test...ok
=WARNING REPORT==== 30-Jan-2026::10:58:36.282624 ===
Connection <0.5518.0> died: shutdown
        erlmcp_pool_manager_tests: pool_resize_shrink_test...=WARNING REPORT==== 30-Jan-2026::10:58:36.282685 ===
Connection <0.5519.0> died: shutdown
=WARNING REPORT==== 30-Jan-2026::10:58:36.282729 ===
Connection <0.5520.0> died: shutdown
=WARNING REPORT==== 30-Jan-2026::10:58:36.282754 ===
Connection <0.5521.0> died: shutdown
=WARNING REPORT==== 30-Jan-2026::10:58:36.282774 ===
Connection <0.5522.0> died: shutdown
=WARNING REPORT==== 30-Jan-2026::10:58:36.282796 ===
Connection <0.5523.0> died: shutdown
=WARNING REPORT==== 30-Jan-2026::10:58:36.282816 ===
Connection <0.5524.0> died: shutdown
=WARNING REPORT==== 30-Jan-2026::10:58:36.282830 ===
Connection <0.5525.0> died: shutdown
=WARNING REPORT==== 30-Jan-2026::10:58:36.282839 ===
Connection <0.5526.0> died: shutdown
=WARNING REPORT==== 30-Jan-2026::10:58:36.282849 ===
Connection <0.5527.0> died: shutdown
ok
        erlmcp_pool_manager_tests: pool_resize_bounds_test...ok
        erlmcp_pool_manager_tests: metrics_tracking_test...ok
        erlmcp_pool_manager_tests: utilization_calculation_test...ok
        erlmcp_pool_manager_tests: -health_check_test_/0-fun-1-...[1.005 s] ok
=WARNING REPORT==== 30-Jan-2026::10:58:37.302600 ===
Connection <0.5568.0> died: killed
        erlmcp_pool_manager_tests: connection_recovery_test...[0.101 s] ok
        erlmcp_pool_manager_tests: -concurrent_checkouts_test_/0-fun-5-...[0.011 s] ok
        erlmcp_pool_manager_tests: -high_concurrency_stress_test_/0-fun-7-...[0.007 s] ok
        erlmcp_pool_manager_tests: pool_exhaustion_test...ok
        erlmcp_pool_manager_tests: no_connections_available_test...ok
        =WARNING REPORT==== 30-Jan-2026::10:58:37.436569 ===
Checkin of unknown connection: <0.5896.0>
erlmcp_pool_manager_tests: invalid_checkin_test...ok
        erlmcp_pool_manager_tests: pool_lifecycle_test...[0.200 s] ok
        [done in 1.381 s]
      [done in 1.381 s]
    module 'erlmcp_pool_strategy'
    module 'erlmcp_security_headers'
    module 'erlmcp_transport_adapter'
    module 'erlmcp_transport_behavior'
    module 'erlmcp_transport_discovery'
      module 'erlmcp_transport_discovery_tests'
        erlmcp_transport_discovery_tests:64: -test_start_stop/1-fun-3-...ok
        erlmcp_transport_discovery_tests:65: -test_start_stop/1-fun-1-...ok
        erlmcp_transport_discovery_tests:76: -test_env_discovery/1-fun-5-...ok
        erlmcp_transport_discovery_tests:77: -test_env_discovery/1-fun-3-...ok
        erlmcp_transport_discovery_tests:78: -test_env_discovery/1-fun-1-...ok
        erlmcp_transport_discovery_tests:94: -test_protocol_enable_disable/1-fun-9-...ok
        erlmcp_transport_discovery_tests:95: -test_protocol_enable_disable/1-fun-7-...ok
        erlmcp_transport_discovery_tests:96: -test_protocol_enable_disable/1-fun-5-...ok
        erlmcp_transport_discovery_tests:97: -test_protocol_enable_disable/1-fun-3-...ok
        erlmcp_transport_discovery_tests:98: -test_protocol_enable_disable/1-fun-1-...ok
        erlmcp_transport_discovery_tests:115: -test_watcher_registration/1-fun-4-...ok
        erlmcp_transport_discovery_tests:116: -test_watcher_registration/1-fun-2-...ok
        erlmcp_transport_discovery_tests:144: -test_discovery_events/1-fun-5-...ok
        erlmcp_transport_discovery_tests:145: -test_discovery_events/1-fun-3-...ok
        erlmcp_transport_discovery_tests:162: -test_scan_now/1-fun-3-...ok
        erlmcp_transport_discovery_tests:163: -test_scan_now/1-fun-1-...ok
        erlmcp_transport_discovery_tests: parse_env_key_test...ok
        erlmcp_transport_discovery_tests: convert_env_types_test...ok
        erlmcp_transport_discovery_tests: valid_protocols_test...ok
        [done in 0.861 s]
      [done in 0.861 s]
    module 'erlmcp_transport_health'
    module 'erlmcp_transport_http'
      module 'erlmcp_transport_http_tests'
        erlmcp_transport_http_tests: test_parse_http_url (Parse HTTP URL)...ok
        erlmcp_transport_http_tests: test_parse_https_url (Parse HTTPS URL)...ok
        erlmcp_transport_http_tests: test_parse_url_with_port (Parse URL with port)...ok
        erlmcp_transport_http_tests: test_parse_url_with_path (Parse URL with path)...ok
        erlmcp_transport_http_tests: test_normalize_headers (Normalize headers)...ok
        erlmcp_transport_http_tests: test_transport_init (Transport init)...=ERROR REPORT==== 30-Jan-2026::10:58:39.582594 ===
Gun connection timeout
[1.019 s] ok
        [done in 1.037 s]
      [done in 1.058 s]
    module 'erlmcp_transport_http_server'
    module 'erlmcp_transport_pipeline'
    module 'erlmcp_transport_pool'
    module 'erlmcp_transport_registry'
      module 'erlmcp_transport_registry_tests'
        erlmcp_transport_registry_tests:56: -test_start_stop/1-fun-1-...ok
undefined
*unexpected termination of test process*
::killed

=======================================================
  Failed: 0.  Skipped: 0.  Passed: 86.
One or more tests were cancelled.
[0;31m===> [1mError running tests
[0m[0m