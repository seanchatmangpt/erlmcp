## ============================================================================
## Development VM Arguments for erlmcp v3
## ============================================================================
## Purpose: Optimized for local development with minimal resource usage
## Security: Permissive settings for easy debugging
##
## Usage: Referenced from docker-compose.override.dev.yml
## ============================================================================

## ============================================================================
## Node Naming
## ============================================================================
## Development uses a fixed name for consistency
-name erlmcp_dev@127.0.0.1

## ============================================================================
## Cookie for Distributed Node Communication
## ============================================================================
## In development, use a simple cookie for local testing
## Override with ERLANG_COOKIE environment variable for security
-setcookie dev_cookie_change_me

## ============================================================================
## Heartbeat Management
## ============================================================================
## Disabled in development for faster restart cycles
## Re-enable with -heart if testing failover behavior
# -heart

## ============================================================================
## Kernel Poll
## ============================================================================
+K true

## ============================================================================
## VM Port Limit
## ============================================================================
## Lower limit for development (saves memory)
+Q 32768
-env ERL_MAX_PORTS 32768

## ============================================================================
## Process Limit
## ============================================================================
## Lower limit for development
+P 131072

## ============================================================================
## Atom Table Size
## ============================================================================
## Smaller atom table for development
+t 1000000

## ============================================================================
## Time Correction
## ============================================================================
+c true

## ============================================================================
## Scheduler Bind Type
## ============================================================================
## Use default scheduler binding for development
# +sbt db

## ============================================================================
## Busy Waiting
## ============================================================================
## Disabled in development to save CPU
# +sbwt very_short

## ============================================================================
## Async Thread Pool
## ============================================================================
## Smaller pool for development
+A 32

## ============================================================================
## Max ETS Tables
## ============================================================================
## Lower limit for development
-env ERL_MAX_ETS_TABLES 25000

## ============================================================================
## Microstate Accounting
## ============================================================================
## Enabled for profiling (useful in development)
+Muacul true

## ============================================================================
## Scheduler Utilization Balancing
## ============================================================================
+sub true

## ============================================================================
## Distribution Buffer Busy Limit
## ============================================================================
+zdbbl 2048

## ============================================================================
## Logger Configuration
## ============================================================================
## More verbose logging in development
-kernel logger_burst_limit 10000

## ============================================================================
## Crash Dump Configuration
## ============================================================================
## Shorter timeout for development
-env ERL_CRASH_DUMP_SECONDS 5
-env ERL_CRASH_DUMP ./logs/erl_crash.dump

## ============================================================================
## System Monitor
## ============================================================================
## Enabled for development debugging
-env ERLMCP_SYSTEM_MONITOR true

## ============================================================================
## Memory Allocator Settings
## ============================================================================
## Development-friendly defaults
+MBas aobf
+MBlmbcs 256
+MBsmbcs 512
+MBsbct 1024

## ============================================================================
## Cgroups Settings
## ============================================================================
## Disabled for local development (not running in containers locally)
# +MBacul 0
# +Msbagf 512
# +MBacgs 0

## ============================================================================
## Garbage Collection Settings
## ============================================================================
## More aggressive GC for development
+hms 23211
+hmbs 23211

## ============================================================================
## Debug Settings
## ============================================================================
## Enable shell for interactive debugging
-shell

## ============================================================================
## Code Path
## ============================================================================
## Add development code paths
-pa ebin

## ============================================================================
## Kernel Settings for Development
## ============================================================================
## Enable all error reports for debugging
-kernel error_logger silent

## ============================================================================
## SASL Settings
## ============================================================================
## Enable progress reports in development
-sasl sasl_error_logger false
-sasl errlog_type all

## ============================================================================
## Compiler Settings
## ============================================================================
## Enable debug info in compiled code
+debug_info
