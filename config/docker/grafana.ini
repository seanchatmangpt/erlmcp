# Grafana configuration for erlmcp v3

[server]
# Protocol (http, https, h2)
protocol = http

# The ip address to bind to, empty will bind to all interfaces
http_addr = 0.0.0.0

# The http port to use
http_port = 3000
domain = erlmcp.local

[log]
# Either "console", "file", "syslog". Default is "console"
# Use "file" to write to a file
mode = console

# Path to file when using mode=file. Default is grafana.log
file = /var/log/grafana/grafana.log

# Either "trace", "debug", "info", "warn", "error", default is "info"
level = info

[database]
# You can connect to a mysql or postgresql database.
# Postgres: "postgres://user:password@host:port/database?sslmode=disable"
# MySQL: "mysql://user:password(host:port)/database"
url = postgres://grafana:password@postgres:5432/grafana

[security]
# default admin user, created on startup
admin_user = admin
admin_password = ${GRAFANA_PASSWORD:-changeme}

# disable admin password reset via http
disable_admin_password_change = false

# disable user signup / registration
disable_user_signup = true

# allow anonymous access
allow_anonymous = false
allow_anonymous_access = false

# allow org creation
allow_org_create = true

# enable automatic login
auto_login = false
auto_login_username =
auto_login_org_role = Viewer

[auth]
# LDAP server
ldap_enabled = false
ldap_config_file = /etc/grafana/ldap.toml
ldap_allow_sign_up = true

[auth.basic]
enabled = true

[auth.anonymous]
enabled = false
org_name = Main Org
org_role = Viewer

[server]
# If you want Grafana to load a custom header template (for adding custom headers like HTTP headers)
# Uncomment the line below
# custom_header_file = /etc/grafana/custom-headers.tpl

# If you want to load a custom footer template (for adding custom HTML at the bottom of the page)
# Uncomment the line below
# custom_footer_file = /etc/grafana/custom-footer.tpl

[users]
# Default user
default_theme = dark

[metrics]
# Disable exposing Grafana metrics
enabled = false

[alerting]
enabled = true
execute_alerts = true

[panels]
disable_html_sanitization = false

[dataproxy]
timeout = 30
max_idle_connections = 100
max_idle_connections_per_host = 10

[log.console]
# log level, can be: trace, debug, info, warn, error
level = info

[log.file]
level = info

[log.syslog]
level = info

[dataproxy]
logging = true

[database]
log_queries = false

[log]
filters = rendering:info,sql:info

[explore]
enabled = true

[plugins]
# Plugin loading
enable_alpha = true
beta_updates = true

[unified_alerting]
enabled = true

[unified_alerting.alertmanager]
url = http://alertmanager:9093
root_url = http://localhost:3000

[unified_alerting.receiver]
default_receiver = erlmcp-notifications

[feature_toggles]
enableFeature:contactPoints = true
enableFeature:contactPointParentheses = true
enableFeature:contactPointParenthesesLegacy = true
enableFeature:contactPointNewBackend = true
enableFeature:contactPointNewModal = true
enableFeature:contactPointNewUI = true