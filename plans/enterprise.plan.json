{
  "tier": "enterprise",
  "name": "Enterprise Tier - Production Applications",
  "description": "Production-grade tier for enterprise applications with high availability and performance requirements",
  "pricing": {
    "model": "flat-per-deployment",
    "description": "No metering, no surprise overages",
    "cost": "Enterprise license pricing"
  },
  "envelope": {
    "throughput": {
      "value": 3000,
      "unit": "msg_per_s",
      "definition": "JSON-RPC messages (requests + responses)",
      "note": "1500 req/s × 2 (req + resp) = 3000 msg/s",
      "workload_id": "tcp_sustained_100k_1kib",
      "transport": "tcp",
      "scope": "per_node",
      "duration_s": 30
    },
    "concurrent_connections": {
      "value": 100000,
      "unit": "connections",
      "workload_id": "tcp_sustained_100k_1kib",
      "transport": "tcp",
      "scope": "per_node"
    },
    "queue_depth": {
      "value": 500000,
      "unit": "messages",
      "scope": "per_node",
      "component": "erlmcp_server_mailbox"
    },
    "latency": {
      "p50_ms": 6,
      "p95_ms": 35,
      "p99_ms": 100,
      "workload_id": "tcp_sustained_100k_1kib",
      "transport": "tcp",
      "measurement_point": "client_to_client"
    },
    "failover_sla": {
      "value": 2,
      "unit": "seconds",
      "topology": "3_node_cluster",
      "detection_mechanism": "net_kernel_monitor",
      "workload_id": "ha_failover_test"
    },
    "connection_timeout": {
      "value": 120,
      "unit": "seconds"
    }
  },
  "memory": {
    "per_connection_heap_mib": 0.045,
    "per_connection_state_mib": 0.010,
    "per_node_base_overhead_mib": 150,
    "per_node_total_rss_mib": 6144,
    "workload_id": "tcp_sustained_100k_1kib",
    "connections": 100000,
    "scope": "per_node",
    "environment": "prod_hw_spec_01",
    "formula": "base_overhead (150) + (100000 conn × 0.055 MiB) + overhead_margin (494) ≈ 6144 MiB",
    "poolboy_overhead_mib": 64,
    "ssl_session_cache_mib": 128
  },
  "limits": {
    "max_message_size_bytes": 10485760,
    "max_payload_size_mb": 100,
    "max_concurrent_requests_per_conn": 128,
    "memory_limit_mb": 4096,
    "cpu_time_limit_seconds": 600,
    "backpressure_threshold_bytes": 67108864
  },
  "features": {
    "client": true,
    "server": true,
    "stdio_transport": true,
    "tcp_transport": true,
    "http_transport": true,
    "websocket_transport": true,
    "sse_transport": true,
    "rate_limiting": true,
    "connection_pooling": true,
    "circuit_breaker": true,
    "otel_observability": "comprehensive",
    "audit_logging": true,
    "fips_140_2": false,
    "high_availability": true,
    "multi_region_support": false,
    "load_balancing": true,
    "health_checks": true
  },
  "refusal_behavior": {
    "throughput_exceeded": {
      "http_status": 429,
      "error_code": "rate_limit_exceeded",
      "message": "Request rate exceeds tier limit (3000 msg/s, 1500 req/s)",
      "retry_after_seconds": 30
    },
    "queue_depth_exceeded": {
      "http_status": 503,
      "error_code": "service_unavailable",
      "message": "System overloaded, queue depth exceeded",
      "retry_after_seconds": 10
    },
    "connection_limit_exceeded": {
      "error_code": "connection_limit",
      "message": "Maximum 100,000 concurrent connections exceeded",
      "close_code": 1008
    },
    "message_size_exceeded": {
      "http_status": 413,
      "error_code": "payload_too_large",
      "message": "Message exceeds 10MB limit"
    },
    "audit_log_error": {
      "http_status": 500,
      "error_code": "audit_log_failure",
      "message": "Failed to write audit log - operation rejected"
    }
  },
  "evidence": {
    "sbom": "plans/enterprise-sbom.json",
    "provenance": "plans/enterprise-provenance.json",
    "chaos_report": "docs/plans/enterprise-chaos-report.md",
    "benchmark_report": "docs/plans/enterprise-benchmark-report.md",
    "audit_schema": "plans/enterprise-audit-schema.json"
  },
  "compliance": {
    "mcp_version": "2025-11-25",
    "features_implemented": 48,
    "security_level": "enhanced",
    "audit_trail": true,
    "sla_monitoring": true
  },
  "sla": {
    "availability_percentage": 99.95,
    "throughput_guarantee": {
      "value": 3000,
      "unit": "msg_per_s",
      "workload_id": "tcp_sustained_100k_1kib",
      "scope": "per_node"
    },
    "failover_time": {
      "value": 10,
      "unit": "seconds",
      "topology": "3_node_cluster"
    },
    "recovery_sla": {
      "value": 15,
      "unit": "minutes"
    }
  },
  "metrology_compliance": {
    "version": "v1.5.0",
    "validated": "2026-01-27",
    "validator": "scripts/validate_plan_metrology.sh",
    "violations": 0,
    "workload_definitions": "bench/workloads/",
    "environment_definitions": "bench/environments/",
    "metrics_glossary": "docs/metrology/METRICS_GLOSSARY.md"
  }
}
