{application, erlmcp_observability,
 [{description, "Observability layer for erlmcp - Metrics, Tracing, Monitoring, Adaptive Learning, JSON Logging"},
  {vsn, "2.1.0"},
  {registered, []},
  {mod, {erlmcp_observability_app, []}},
  {applications,
   [kernel,
    stdlib,
    sasl,
    crypto,
    inets,
    opentelemetry_api,
    opentelemetry,
    opentelemetry_exporter,
    cowboy,
    erlmcp_core
   ]},
  {env,[
    %% Environment Configuration (development | testing | staging | production)
    {environment, development},

    %% Logging Configuration
    {log_level, info},  % Override with ERLMCP_LOG_LEVEL env var

    %% JSON Log Handler Configuration
    {json_log_handler, [
      {enabled, true},
      {file, "log/development/erlmcp.json.log"},
      {max_no_bytes, 104857600},  % 100MB
      {max_no_files, 10},
      {pretty_print, false}  % Set to true for human-readable JSON
    ]},

    %% Log Aggregation Configuration (Loki/ELK)
    {log_aggregation, [
      {enabled, false},
      {type, loki},  % loki | elk | fluentd
      {endpoint, "http://localhost:3100"},
      {batch_size, 100},
      {flush_interval, 5000}
    ]},

    %% Adaptive Learning Configuration
    {adaptive_learning, [
      {embedding_dim, 256},
      {distance_metric, cosine},
      {replay_buffer_size, 10000},
      {consolidation_interval_ms, 300000},
      {optimization_interval_ms, 60000},
      {anomaly_sigma_threshold, 3.0}
    ]}
  ]},
  {modules, []},
  {licenses, ["Apache-2.0"]},
  {links, []},
  %% OTP 27+ Runtime Dependencies
  {runtime_dependencies, [
    "erts-16.0.3",     % OTP 28 ERTS minimum
    "kernel-10.4",     % OTP 28 Kernel minimum
    "stdlib-6.0",      % OTP 28 STDLIB minimum
    "sasl-4.0",        % SASL (OTP 28)
    "crypto-5.3",      % Crypto (OTP 27+)
    "inets-9.0",       % HTTP client (OTP 28)
    "opentelemetry_api-1.5.0",  % OTEL API (external)
    "opentelemetry-1.7.0",       % OTEL SDK (external)
    "opentelemetry_exporter-1.10.0",  % OTEL Exporter (external)
    "cowboy-2.10.0",   % HTTP server (external)
    "erlmcp_core-2.1.0"  % Core application
  ]},
  %% OTP Version Requirements
  {notes, [
      "Requires: Erlang/OTP 28+ (STRICT)",
      "OTP 28+ features: improved process iteration for monitoring, native JSON module, hibernate/0",
      "OTP 27+ features: logger_formatter enhancements, json:encode/decode",
      "OTP 26+ features: persistent config, prep_stop/1 for cleanup",
      "Dependencies: opentelemetry_api 1.5+, opentelemetry 1.7+, opentelemetry_exporter 1.10+",
      "Previous OTP 25 support deprecated - upgrade to OTP 28+ required",
      "JSON Logging: erlmcp_json_log_formatter provides structured JSON output",
      "Log Aggregation: Supports Loki, ELK, FluentD via erlmcp_log_aggregator",
      "See docs/OTP_APPLICATION_CONFIG_RESEARCH.md for observability features"
  ]}
 ]}.
