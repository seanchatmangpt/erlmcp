<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>erlmcp Pricing Portal</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 40px 20px; }
    .container { max-width: 1200px; margin: 0 auto; }
    .header { text-align: center; color: white; margin-bottom: 60px; }
    .header h1 { font-size: 48px; margin-bottom: 10px; }
    .header p { font-size: 20px; opacity: 0.9; }
    .plans-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-bottom: 60px; }
    .plan-card { background: white; border-radius: 12px; padding: 40px 30px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); transition: transform 0.3s ease, box-shadow 0.3s ease; }
    .plan-card:hover { transform: translateY(-10px); box-shadow: 0 30px 80px rgba(0,0,0,0.4); }
    .plan-name { font-size: 24px; font-weight: 700; margin-bottom: 12px; color: #333; }
    .plan-description { font-size: 14px; color: #666; margin-bottom: 20px; line-height: 1.6; }
    .envelope-summary { background: #f5f5f5; border-radius: 8px; padding: 16px; margin-bottom: 20px; font-size: 13px; }
    .envelope-item { display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid #e0e0e0; }
    .envelope-item:last-child { border-bottom: none; }
    .envelope-label { font-weight: 600; color: #333; }
    .envelope-value { color: #667eea; font-weight: 700; }
    .button-group { display: flex; gap: 10px; margin-top: 20px; }
    .btn { flex: 1; padding: 12px 16px; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 13px; }
    .btn-primary { background: #667eea; color: white; }
    .btn-primary:hover { background: #5568d3; }
    .btn-secondary { background: #f0f0f0; color: #333; border: 1px solid #e0e0e0; }
    .btn-secondary:hover { background: #e8e8e8; }
    .loading { text-align: center; color: white; font-size: 18px; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>erlmcp Pricing</h1>
      <p>Simple, transparent, flat-rate pricing. No metering, no surprises.</p>
    </div>
    <div id="content" class="loading">Loading plans...</div>
  </div>

  <script>
    async function loadPlans() {
      try {
        const response = await fetch('/dist/marketplace/plans.json');
        if (!response.ok) throw new Error('Failed to load plans');
        const data = await response.json();
        renderPortal(data);
      } catch (error) {
        document.getElementById('content').innerHTML = `<div style="color: white; text-align: center;">Error loading plans: ${error.message}</div>`;
      }
    }

    function renderPortal(data) {
      const plans = data.plans || [];
      const html = `
        <div class="plans-grid">
          ${plans.map(plan => `
            <div class="plan-card">
              <div class="plan-name">${escapeHtml(plan.name)}</div>
              <div class="plan-description">${escapeHtml(plan.description)}</div>
              <div class="envelope-summary">
                <div class="envelope-item">
                  <span class="envelope-label">Throughput</span>
                  <span class="envelope-value">${plan.envelope.throughput_req_s.toLocaleString()} req/s</span>
                </div>
                <div class="envelope-item">
                  <span class="envelope-label">Concurrent</span>
                  <span class="envelope-value">${plan.envelope.concurrent_connections.toLocaleString()}</span>
                </div>
                <div class="envelope-item">
                  <span class="envelope-label">P99 Latency</span>
                  <span class="envelope-value">${plan.envelope.p99_latency_ms}ms</span>
                </div>
                <div class="envelope-item">
                  <span class="envelope-label">Failover SLA</span>
                  <span class="envelope-value">${plan.envelope.failover_sla_seconds}s</span>
                </div>
              </div>
              <div class="button-group">
                <button class="btn btn-primary" onclick="alert('View details for ' + '${plan.id}')">Details</button>
                <button class="btn btn-secondary" onclick="alert('View evidence for ' + '${plan.id}')">Evidence</button>
              </div>
            </div>
          `).join('')}
        </div>
      `;
      document.getElementById('content').innerHTML = html;
    }

    function escapeHtml(text) {
      const map = {'&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#039;'};
      return text.replace(/[&<>"']/g, m => map[m]);
    }

    document.addEventListener('DOMContentLoaded', loadPlans);
  </script>
</body>
</html>