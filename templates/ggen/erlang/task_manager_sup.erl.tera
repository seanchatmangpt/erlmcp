{#
  Erlang Task Manager Supervisor Template

  Generates a production-ready OTP supervisor for the task management system.

  Context Variables:
    - module_name: string - Module name (default: erlmcp_task_manager_sup)
    - worker_module: string - Worker module name (default: erlmcp_task_manager)
    - restart_strategy: string - Restart strategy (default: one_for_one)
    - max_restarts: integer - Max restarts (default: 5)
    - max_seconds: integer - Max seconds window (default: 10)
    - shutdown_timeout: integer - Shutdown timeout ms (default: 5000)
    - timestamp: string - Generation timestamp
    - generator_version: string - Template version
#}
%%% -*- mode: erlang; erlang-indent-level: 4; indent-tabs-mode: nil -*-
%%%-------------------------------------------------------------------
%%% @doc
%%% Task Manager Supervisor
%%%
%%% Supervises the task management system with proper restart strategies.
%%% Uses {{ restart_strategy | default(value="one_for_one") }} to isolate failures.
%%%
%%% WARNING: This file is auto-generated by ggen.
%%% DO NOT EDIT MANUALLY - Changes will be overwritten.
%%%
%%% Generated: {{ timestamp }}
%%% Generator: ggen v{{ generator_version }}
%%% @end
%%%-------------------------------------------------------------------
-module({{ module_name | default(value="erlmcp_task_manager_sup") }}).
-behaviour(supervisor).

%% API exports
-export([
    start_link/0,
    start_link/1
]).

%% Supervisor callbacks
-export([init/1]).

-define(SERVER, ?MODULE).
-define(WORKER, {{ worker_module | default(value="erlmcp_task_manager") }}).

%%%===================================================================
%%% API Functions
%%%===================================================================

%% @doc Starts the supervisor with default configuration.
-spec start_link() -> {ok, pid()} | {error, term()}.
start_link() ->
    start_link(#{}).

%% @doc Starts the supervisor with custom configuration.
-spec start_link(map()) -> {ok, pid()} | {error, term()}.
start_link(Config) ->
    supervisor:start_link({local, ?SERVER}, ?MODULE, Config).

%%%===================================================================
%%% Supervisor Callbacks
%%%===================================================================

%% @private
init(Config) ->
    SupFlags = #{
        strategy => {{ restart_strategy | default(value="one_for_one") }},
        intensity => {{ max_restarts | default(value=5) }},
        period => {{ max_seconds | default(value=10) }}
    },

    ChildSpecs = [
        #{
            id => ?WORKER,
            start => {?WORKER, start_link, [Config]},
            restart => permanent,
            shutdown => {{ shutdown_timeout | default(value=5000) }},
            type => worker,
            modules => [?WORKER]
        }
    ],

    {ok, {SupFlags, ChildSpecs}}.
