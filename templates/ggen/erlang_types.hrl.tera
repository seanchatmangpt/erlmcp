{#
  Erlang Type Definitions Generated from TCPS Ontology

  Generates Erlang type specifications from RDF class definitions.
  This ensures type safety and consistency between ontology and code.

  Context Variables:
    - classes: array - List of ontology classes with properties
#}
%%% -*- mode: erlang; erlang-indent-level: 4; indent-tabs-mode: nil -*-
%%%-------------------------------------------------------------------
%%% @doc
%%% Generated Erlang type definitions from TCPS ontology.
%%%
%%% WARNING: This file is auto-generated by ggen.
%%% DO NOT EDIT MANUALLY - Changes will be overwritten.
%%% Edit the ontology source files instead and regenerate.
%%%
%%% Generated: {{ timestamp }}
%%% Source: TCPS Core Ontology
%%% Generator: ggen v{{ generator_version }}
%%% @end
%%%-------------------------------------------------------------------

-ifndef(TCPS_GENERATED_TYPES_HRL).
-define(TCPS_GENERATED_TYPES_HRL, true).

%% Type Definitions from Ontology Classes

{% for class in classes -%}
%% @doc {{ class.comment | default(value="") }}
-type {{ class.name | lower }}() :: #{
    {% for prop in class.properties -%}
    {{ prop.name }} => {{ prop.erlang_type }}{% if not loop.last %},{% endif %}
    {% endfor %}
}.

{% endfor %}

%% Common TCPS Types

-type sku_id() :: binary().
-type work_order_id() :: binary().
-type andon_id() :: binary().
-type receipt_id() :: binary().
-type stage_name() :: binary().
-type timestamp() :: binary(). % ISO 8601 format
-type status() :: pass | fail | skip | pending.
-type severity() :: critical | major | minor | info.
-type heijunka_bucket() :: reliability | security | cost | compliance.

%% Receipt Type
-type receipt() :: #{
    stage_name := stage_name(),
    timestamp := timestamp(),
    status := status(),
    sku_id := sku_id(),
    work_order_id => work_order_id(),
    duration_ms => non_neg_integer(),
    environment => binary(),
    evidence => map(),
    checksum => binary(),
    metadata => map()
}.

%% Work Order Type
-type work_order() :: #{
    work_order_id := work_order_id(),
    demand_signal := binary(),
    bucket := heijunka_bucket(),
    priority := binary(),
    created_by := binary(),
    created_at := timestamp(),
    sku_id := sku_id(),
    target_completion => timestamp(),
    description => binary(),
    dependencies => [work_order_id()],
    status := pending | in_progress | completed | failed
}.

%% Andon Event Type
-type andon_event() :: #{
    andon_id := andon_id(),
    failure_reason := binary(),
    affected_sku := sku_id(),
    severity := severity(),
    timestamp := timestamp(),
    detected_by := binary(),
    stage_name := stage_name(),
    error_details := binary(),
    remediation_status := pending | in_progress | resolved,
    work_order_id => work_order_id(),
    five_whys => [#{why => binary(), answer => binary()}],
    remediation_plan => binary(),
    spec_delta_required => boolean(),
    test_delta_required => boolean()
}.

-endif. % TCPS_GENERATED_TYPES_HRL
